<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Cleanroom Intake Form</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        /* --- Modern UI Overhaul --- */
        :root {
            --primary-color: #0052cc;
            --light-primary: #e6f0ff;
            --border-color: #dfe1e6;
            --text-color: #172b4d;
            --bg-color: #f4f5f7;
            --warning-bg: #fffae6;
            --warning-border: #ffab00;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 2rem;
            -webkit-font-smoothing: antialiased;
        }

        .container {
            max-width: 800px;
            margin: auto;
            background: #ffffff;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        h1, h2, h3 {
            color: var(--text-color);
        }
        h1 { margin-bottom: 0.5rem; }
        p { margin-bottom: 2rem; line-height: 1.6; }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            font-size: 0.9rem;
        }

        input[type="text"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background-color: #fafbfc;
            transition: all 0.2s ease;
            box-sizing: border-box; /* Important for padding */
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px var(--light-primary);
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .guidance-note {
            background-color: var(--light-primary);
            border-left: 4px solid var(--primary-color);
            padding: 12px 16px;
            margin-top: 8px;
            font-size: 0.9em;
            border-radius: 4px;
            line-height: 1.5;
        }
        
        .warning-note {
            background-color: var(--warning-bg);
            border-left-color: var(--warning-border);
        }

        .collapsible-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px;
            background-color: #fafbfc;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            margin-top: 10px;
            transition: background-color 0.2s ease;
        }
        .collapsible-header:hover {
            background-color: #f4f5f7;
        }

        .collapsible-header h2 {
            margin: 0;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .collapsible-content {
            padding: 0 18px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-in-out; /* Smoother transition */
            background-color: white;
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 8px 8px;
        }
        .collapsible-content.open {
            padding-top: 24px;
        }

        .icon {
            transition: transform 0.3s ease;
        }
        .icon.rotate {
            transform: rotate(180deg);
        }
        
        #exportPdfBtn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            font-weight: 500;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.1s ease;
            display: block;
            width: 100%;
            margin-top: 2rem;
        }
        #exportPdfBtn:hover {
            background-color: #0041a3;
        }
        #exportPdfBtn:active {
            transform: scale(0.98);
        }

    </style>
</head>
<body>
    <div class="container" id="formContainer"> <h1>Cleanroom Project Intake Form üìù</h1>
        <p>This interactive form guides you through the quoting process. Fill out the sections based on the client's project stage.</p>

        <div class="form-group">
            <label for="projectStage">Where are you in the project process?</label>
            <select id="projectStage" name="projectStage">
                <option value="rom">ROM (Rough Order of Magnitude)</option>
                <option value="budgetary">Budgetary Estimate</option>
                <option value="detailed">Detailed Quote</option>
            </select>
        </div>
        <div id="stage-guidance" class="guidance-note" style="display:none;"></div>

        <div class="collapsible-container" id="romSection">
            <div class="collapsible-header">
                <h2>Phase 1: ROM (Rough Order of Magnitude)</h2>
                <i class="fas fa-chevron-down icon"></i>
            </div>
            <div class="collapsible-content">
                <h3>Customer Information</h3>
                <div class="form-group"><label for="customerName">Customer Name:</label><input type="text" id="customerName" name="customerName"></div>
                <div class="form-group"><label for="location">Location:</label><input type="text" id="location" name="location"></div>
                <h3>Basic Scope</h3>
                <div class="form-group"><label for="cleanroomType">Cleanroom Type / Process:</label><input type="text" id="cleanroomType" name="cleanroomType"></div>
                <div class="form-group"><label for="isoRating">ISO Rating:</label><select id="isoRating" name="isoRating"><option value="">--Select--</option><option value="5">ISO 5</option><option value="6">ISO 6</option><option value="7">ISO 7</option><option value="8">ISO 8</option></select></div>
                <div id="iso-guidance" class="guidance-note" style="display:none;"></div>
                <div class="form-group"><label for="dimensions">Approx. Dimensions (L x W x H):</label><input type="text" id="dimensions" name="dimensions"></div>
                <div class="form-group"><label for="buildingHeight">Surrounding Building Ceiling Height (ft):</label><input type="number" id="buildingHeight" name="buildingHeight"></div>
                <div id="height-guidance" class="guidance-note" style="display:none;"></div>
            </div>
        </div>

        <div class="collapsible-container" id="budgetarySection">
            <div class="collapsible-header">
                <h2>Phase 2: Budgetary Estimate</h2>
                <i class="fas fa-chevron-down icon"></i>
            </div>
            <div class="collapsible-content">
                <h3>Environmental Performance</h3>
                 <div class="form-group"><label for="cleanroomTemp">Cleanroom Target Temp (¬∞F):</label><input type="number" id="cleanroomTemp" name="cleanroomTemp"></div>
                <div class="form-group"><label for="cleanroomRH">Cleanroom Target RH (%):</label><input type="number" id="cleanroomRH" name="cleanroomRH"></div>
                 <div id="dew-point-warning" class="guidance-note warning-note" style="display:none;"></div>
                <div class="form-group"><label for="ambientTemp">Surrounding Ambient Temp (¬∞F):</label><input type="number" id="ambientTemp" name="ambientTemp"></div>
                <div id="hvac-design-guidance" class="guidance-note" style="display:none;"></div>
                <h3>Architectural Specs</h3>
                <div class="form-group"><label for="flooring">Flooring Requirements:</label><input type="text" id="flooring" name="flooring" placeholder="e.g., Sheet Vinyl, Epoxy"></div>
                <div class="form-group"><label for="doors">Doors:</label><input type="text" id="doors" name="doors" placeholder="e.g., 2x Manual Swing, Interlocking"></div>
            </div>
        </div>

        <div class="collapsible-container" id="detailedSection">
             <div class="collapsible-header">
                <h2>Phase 3: Detailed Quote</h2>
                <i class="fas fa-chevron-down icon"></i>
            </div>
            <div class="collapsible-content">
                <h3>Process & Utility Requirements</h3>
                <div class="form-group"><label for="hazardous">Process Materials:</label><select id="hazardous" name="hazardous"><option value="">--Select--</option><option value="non-hazardous">Non-Hazardous</option><option value="hazardous">Hazardous</option></select></div>
                <div id="hazardous-guidance" class="guidance-note" style="display:none;"></div>
                <div class="form-group"><label for="gases">Gases / Liquids Used:</label><input type="text" id="gases" name="gases"></div>
                <div class="form-group"><label for="equipment">Major Process Equipment (include heat loads):</label><textarea id="equipment" name="equipment"></textarea></div>
                <h3>Compliance & Monitoring</h3>
                <div class="form-group"><label for="compliance">Compliance Requirements:</label><input type="text" id="compliance" name="compliance" placeholder="e.g., USP 797/800, 21 CFR Part 211"></div>
                <div id="compliance-guidance" class="guidance-note" style="display:none;"></div>
                <div class="form-group"><label for="monitoring">Monitoring Requirements:</label><input type="text" id="monitoring" name="monitoring" placeholder="e.g., Particle Counters, Pressure Sensors"></div>
            </div>
        </div>
        
        <button id="exportPdfBtn">Export as PDF</button>

    </div>

    <script src="intake-form-script.js"></script>
</body>
</html>